---
title: Arcana
layout: default
---
{% assign current = page.url | downcase | split: '/' %}
<!-- Main -->
<section class="wrapper style1">
	<div class="container">
		<div id="content">

				<!-- Content -->
			
					<article>
						<header>
							<h2>Overview of Map2Check</h2>
							<p>Map2Check Options</p>
						</header>                       
                       
                    <div style="width: 100%; margin-top: 100px;">
                        <p>Contents</p>
                        <ul>
                            <li>
                                <a href="#map_usage">Map2Check Usage</a>
                            </li>
                            <li>
                                <a href="#map_sample">Map2Check First Example</a>
                            </li>
                            <li>
                                <a href="#map_options">Map2Check Options</a>
                            </li>
                        </ul>
                        
                        <!-- Each content -->
                        <h2 id="map_usage">Map2Check Usage</h2>
                            <p style="text-align:justify">
                            Map2Check is invoked through a command-line interface as follows: 
                            </p>
<figure id="code">
<pre class="prettyprint lang-sh code">
$./map2check [options] program.[i|c]
</pre>
</figure>
                            </br>
                            <p style="text-align:justify">
                            To get a complete list of Map2Check’s command-line options run: 
                            <font face="courier new"><a href="#map_options">map2check --help</a></font>. The remainder of this page illustrate Map2Check’s main command-line options.
                            </p>
                            
                        <h2 id="map_sample">Map2Check First Example</h2>
                            <p style="text-align:justify">
                            In this first example, we show how to apply Map2Check tool to identify a simple invalid free in the following C source code, called invalid_free.c
                            </p>
<figure id="code">
<pre class="prettyprint lang-c linenums code">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main()
{
    int *a = malloc(12);
    int *b = malloc(12);
    int  c =  12;
    *a = c;
    b = a;
    
    free(a);
    free(b);//invalid free
}
</pre>
</figure>
                            </br>
                            <p style="text-align:justify">
                            Map2Check should be called in the installation directory as follows: 
                            <font face="courier new">./map2check invalid_free.c</font>, this way the 
                            following result will be presented. 
                            </p>
                            
<figure id="code">
<pre class="prettyprint lang-sh code">
Started Map2Check
Compiling invalid_free.c
Successfully read bitcode/IR
Function: main
...
Started klee execution
Using STP solver backend
KLEE: done: total instructions = 4169
KLEE: done: completed paths = 1
KLEE: done: generated tests = 1
Started counter example generation
Counter-example:

State 0 file invalid_free.c Line content     int *a = malloc(12);

LIST LOG ROW
        ID: 0
        Address: 0x7f7d86302a40
        PointsTo: 0x7f7d862d2420
        Is Free: 0
        Is Dynamic: 1
        Var Name: a
        Line Number: 6
        Function Name: main
        Step : 0
...
State 5 file invalid_free.c Line content     free(b);//invalid free

LIST LOG ROW
        ID: 0
        Address: 0x7f7d86302710
        PointsTo: 0x7f7d862d2420
        Is Free: 1
        Is Dynamic: 0
        Var Name: b
        Line Number: 13
        Function Name: main
        Step : 5

----------------------------------------------------
Violated property:
        file map2check_property line 13 function main
        FALSE-FREE: Operand of free must have zero pointer offset

VERIFICATION FAILED
</pre>
</figure>
</br>
                            
                            <h2 id="map_options">Map2Check Options</h2>
                            <p style="text-align:justify">
                            Map2Check is invoked as follows: <font face="courier new"><a href="#map_options">map2check --help</a></font>.
                            </p>
                            
<figure id="code">
<pre class="prettyprint lang-sh code">
Options:
  -h [ --help ]                show help
  -i [ --input-file ] arg      specifies the files
  -f [ --target-function ] arg checks if function can be executed
  -e [ --expected-result ] arg specifies what output should be, used for tests
  -p [ --print-list-log ]      prints list log during counter example
  -w [ --generate-witness ]    generate witness file
  -d [ --debug-info ]          prints debug info
  -m [ --assume-malloc-true ]  assumes that all mallocs will not fail
  -v [ --version ]             prints map2check version
</pre>
</figure>
</br>
                    </div>
		
			</div>
		</div>
	</section>			